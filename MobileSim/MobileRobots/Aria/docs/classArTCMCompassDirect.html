<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Aria: ArTCMCompassDirect Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<h1>ArTCMCompassDirect Class Reference</h1>  </div>
</div>
<div class="contents">
<!-- doxytag: class="ArTCMCompassDirect" --><!-- doxytag: inherits="ArTCM2" -->
<p>Talk to a compass directly over a computer serial port.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;ArTCMCompassDirect.h&gt;</code></p>

<p><a href="classArTCMCompassDirect-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acfac10ee575b3c9c56bec97ba7d8d9b1"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="acfac10ee575b3c9c56bec97ba7d8d9b1" args="(ArDeviceConnection *devCon)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e96f8a437ff8c0b89c7e704db75832c"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="a7e96f8a437ff8c0b89c7e704db75832c" args="(const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5a8467fd6d8705e3a348f079e2b4b58f"></a><!-- doxytag: member="ArTCMCompassDirect::blockingConnect" ref="a5a8467fd6d8705e3a348f079e2b4b58f" args="(unsigned long connectTimeout=5000)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>blockingConnect</b> (unsigned long connectTimeout=5000)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#ae86ed13fbcae5fa8e76d0e6ddc50f3fe">commandAutoCalibration</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a2419d8c6fdcca39494a579e698549cf9">commandJustCompass</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#aae038b6b57851fbf2aed64cd0c08d872">commandSoftReset</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c53aa53dcefeab97cc94922656a0911"></a><!-- doxytag: member="ArTCMCompassDirect::commandStopCalibration" ref="a1c53aa53dcefeab97cc94922656a0911" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandStopCalibration</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac7d2dec5fefcc131234af1b54819d23e"></a><!-- doxytag: member="ArTCMCompassDirect::commandUserCalibration" ref="ac7d2dec5fefcc131234af1b54819d23e" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandUserCalibration</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a62383530bc16af4d2b923ebfbc98faa6">connect</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3b610e397855e0eb59db24a6fb6d43b"></a><!-- doxytag: member="ArTCMCompassDirect::getDeviceConnetion" ref="ad3b610e397855e0eb59db24a6fb6d43b" args="()" -->
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDeviceConnetion</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd">read</a> (unsigned int msWait=1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a915890f7feead12c8b6d4f8876685f51"></a><!-- doxytag: member="ArTCMCompassDirect::setDeviceConnection" ref="a915890f7feead12c8b6d4f8876685f51" args="(ArDeviceConnection *devCon)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setDeviceConnection</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpd41d8cd98f00b204e9800998ecf8427e"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61">commandContinuousPackets</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b941b2fd233837373fceef192e0f1df"></a><!-- doxytag: member="ArTCMCompassDirect::commandOnePacket" ref="a2b941b2fd233837373fceef192e0f1df" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOnePacket</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad10db749a3dbbb995adf91ef2cd421e8"></a><!-- doxytag: member="ArTCMCompassDirect::commandOff" ref="ad10db749a3dbbb995adf91ef2cd421e8" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOff</b> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Talk to a compass directly over a computer serial port. </p>
<p>This class configures and recieves compass heading data from a TCM2 or TCM2.5 compass directly over a computer serial port, rather than via tha robot. This class cannot recieve pitch, roll or temperature data from the compass. On all Pioneer robots, the TCM compass (as originally installed by MobileRobots) is connected to the robot microcontroller, so if you have a Pioneer with this configuration, you should instead use the <a class="el" href="classArTCMCompassRobot.html">ArTCMCompassRobot</a> class. Only use this class if you have connected the compass to the computer serial port.</p>
<p>You can create an instance of this class directly, or using an <a class="el" href="classArCompassConnector.html">ArCompassConnector</a> object and giving the "-compassType serialtcm" program argument.</p>
<p>If you create your own <a class="el" href="classArTCMCompassDirect.html" title="Talk to a compass directly over a computer serial port.">ArTCMCompassDirect</a> object, you must call the <a class="el" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd">read()</a> method periodically (ideally at the same rate the compass sends data, approx. 8 hz by default) to read and parse incoming data. You can use an <a class="el" href="classArRobot.html" title="Central class for communicating with and operating the robot.">ArRobot</a> callback to do this, for example: </p>
<div class="fragment"><pre class="fragment">    <a class="code" href="classArRetFunctor1C.html" title="Functor for a member function with return value and 1 parameter.">ArRetFunctor1C&lt;int, ArTCMCompassDirect, unsigned int&gt;</a> compassReadFunc(myCompass, &amp;<a class="code" href="classArTCMCompassDirect.html#aebe52e5b8f1cdeca50c99e95e656dbcd">ArTCMCompassDirect::read</a>, 10);
    myRobot-&gt;addSensorInterpTask(<span class="stringliteral">&quot;ArTCMCompassDirect read&quot;</span>, 200, &amp;compassReadFunc);
</pre></div><p>If you use <a class="el" href="classArCompassConnector.html">ArCompassConnector</a>, however, it will automatically do this. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ae86ed13fbcae5fa8e76d0e6ddc50f3fe"></a><!-- doxytag: member="ArTCMCompassDirect::commandAutoCalibration" ref="ae86ed13fbcae5fa8e76d0e6ddc50f3fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArTCMCompassDirect::commandAutoCalibration </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send commands to begin calibrating </p>

<p>Implements <a class="el" href="classArTCM2.html#aaba360fbc82b2c25cd25a20f42e4c206">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="a9c392ac0c9968c0f9cdac57c547ebf61"></a><!-- doxytag: member="ArTCMCompassDirect::commandContinuousPackets" ref="a9c392ac0c9968c0f9cdac57c547ebf61" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArTCMCompassDirect::commandContinuousPackets </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send commands to start/stop sending data. </p>

<p>Implements <a class="el" href="classArTCM2.html#a8b57b5ac6e217d7494cc72cfae61f171">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="a2419d8c6fdcca39494a579e698549cf9"></a><!-- doxytag: member="ArTCMCompassDirect::commandJustCompass" ref="a2419d8c6fdcca39494a579e698549cf9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ArTCMCompassDirect::commandJustCompass </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Same as <a class="el" href="classArTCMCompassDirect.html#a9c392ac0c9968c0f9cdac57c547ebf61">commandContinuousPackets()</a> in this implementation. </p>

<p>Implements <a class="el" href="classArTCM2.html#af1af3c0170ed4c7a63fa6d00ce4a8d6b">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="aae038b6b57851fbf2aed64cd0c08d872"></a><!-- doxytag: member="ArTCMCompassDirect::commandSoftReset" ref="aae038b6b57851fbf2aed64cd0c08d872" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ArTCMCompassDirect::commandSoftReset </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Not implemented yet. </p>

<p>Implements <a class="el" href="classArTCM2.html#a932f31b8962d13d634e79b74337e817b">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="a62383530bc16af4d2b923ebfbc98faa6"></a><!-- doxytag: member="ArTCMCompassDirect::connect" ref="a62383530bc16af4d2b923ebfbc98faa6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ArTCMCompassDirect::connect </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Open device connection if not yet open and send commands to configure compass. </p>

<p>Reimplemented from <a class="el" href="classArTCM2.html#aadac4c6e5254827cc598dbfab7e671fe">ArTCM2</a>.</p>

</div>
</div>
<a class="anchor" id="aebe52e5b8f1cdeca50c99e95e656dbcd"></a><!-- doxytag: member="ArTCMCompassDirect::read" ref="aebe52e5b8f1cdeca50c99e95e656dbcd" args="(unsigned int msWait=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ArTCMCompassDirect::read </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>msWait</em> = <code>1</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Read all available data, store, and call callbacks if any were added. unsigned int msWait If 0, wait indefinately for new data. Otherwise, wait a maximum of this many milliseconds for data to arrive. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>A value &gt; 0 if messages were recieved from the compass, 0 if no data was recieved, and a value &lt; 0 on error reading from the compass. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>ArTCMCompassDirect.h</li>
<li>ArTCMCompassDirect.cpp</li>
</ul>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Tue Aug 23 2011 16:44:30 for Aria by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
